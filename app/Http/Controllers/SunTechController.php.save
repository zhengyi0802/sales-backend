<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Collections\SunTechCollection;
use App\Models\StReceive;

class SunTechController extends Controller
{
    //
    public function receive(Request $request)
    {
        $date = $request->all();
        $st = array([
             'buysafeno'           => $data['buysafeno'],
             'user_no'             => $data['UserNo'],
             'td'                  => $data['Td'],
             'mn'                  => $data['MN'],
             'note1'               => urldecode($data['note1']),
             'note2'               => urldecode($data['note2']),
             'send_type'           => $data['SendType'],
             'barcode_a'           => $data['BarcodeA'],
             'barcode_b'           => $data['BarcodeB'],
             'barcode_c'           => $data['BarcodeC'],
             'post_barcode_a'      => $data['PostBarcodeA'],
             'post_barcode_b'      => $data['PostBarcodeB'],
             'post_barcode_c'      => $data['PostBarcodeC'],
             'entity_atm'          => $data['EntityATM'],
             'bank_code'           => $data['BankCode'],
             'bank_name'           => $data['BankName'],
             'store_type'          => $data['StoreType'],
             'store_msg'           => urldecode($data['StoreMsg']),
             'chk_value'           => $data['ChkValue'],
             'approve_code'        => $data['ApproveCode'],

        ]);

    }

    /**
      * 檢查交易檢查碼是否正確（SHA1雜湊值）
     */
    function getChkValue($string)
    {
        return strtoupper(sha1($string));
    }

}

